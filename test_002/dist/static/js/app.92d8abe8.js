(function(e){function t(t){for(var i,o,n=t[0],r=t[1],c=t[2],p=0,m=[];p<n.length;p++)o=n[p],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&m.push(l[o][0]),l[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,n=1;n<a.length;n++){var r=a[n];0!==l[r]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var i={},l={app:0},s=[];function o(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=i,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(a,i,function(t){return e[t]}.bind(null,i));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=r;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("85ec"),l=a.n(i);l.a},"039a":function(e,t,a){"use strict";var i=a("7174"),l=a.n(i);l.a},1:function(e,t){},"20d5":function(e,t,a){},"3a7d":function(e,t,a){},5079:function(e,t,a){"use strict";var i=a("20d5"),l=a.n(i);l.a},"54d9":function(e,t,a){e.exports=a.p+"static/img/head.93dcea88.png"},"565b":function(e,t,a){e.exports=a.p+"static/img/hhh.3f823bea.jpg"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("keep-alive",{attrs:{exclude:"needExcludeComponentName"}}),e.$route.meta.noKeepAlive?e._e():a("keep-alive",[a("router-view")],1),e.$route.meta.noKeepAlive?a("router-view"):e._e()],1)},s=[],o=a("53d4"),n=a.n(o),r={name:"App",components:{imagvue:n.a}},c=r,d=(a("034f"),a("2877")),p=Object(d["a"])(c,l,s,!1,null,null,null),m=p.exports,u=a("5c96"),f=a.n(u),g=(a("0fae"),a("bc3a")),h=a.n(g),b=a("a7fe"),_=a.n(b),v=a("8c4f"),y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"150px"}},[i("el-carousel",{staticStyle:{width:"800px",heigh:"250px",position:"absolute",left:"50%",top:"10%",transform:"translateX(-50%) translateY(-20%)"},attrs:{"indicator-position":"outside"}},e._l(e.imgs,(function(e,t){return i("el-carousel-item",{key:t},[i("img",{staticClass:"image",attrs:{src:a("565b")}})])})),1),i("el-card",{staticStyle:{width:"400px","margin-top":"150px"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("用户登录")])]),i("table",[i("tr",[i("td",[e._v("用户名 ")]),i("td",[i("el-input",{staticStyle:{width:"200px","margin-left":"22px"},attrs:{placeholder:"请输入用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),i("el-button",{attrs:{type:"text ;margin-right: 50px"},on:{click:e.regist}},[e._v("注册用户")])],1)]),i("tr",[i("td",[e._v("密码 ")]),i("td",[i("el-input",{staticStyle:{width:"200px","margin-left":"-35px"},attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)]),i("tr",[i("td",{attrs:{colspan:"2"}},[i("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("登录")])],1)])])]),i("el-dialog",{attrs:{title:"医生注册",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"sex"}},[i("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[i("el-option",{attrs:{label:"男",value:"男"}}),i("el-option",{attrs:{label:"女",value:"女"}})],1)],1),i("el-form-item",{attrs:{label:"账户","label-width":e.formLabelWidth,prop:"account"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),i("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"pwd"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1),i("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"pwd_0"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.pwd_0,callback:function(t){e.$set(e.form,"pwd_0",t)},expression:"form.pwd_0"}})],1),i("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"tel"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),i("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth,prop:"department"}},[i("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},[i("el-option",{attrs:{label:"放射科",value:"放射科"}}),i("el-option",{attrs:{label:"骨外科",value:"骨外科"}}),i("el-option",{attrs:{label:"儿科",value:"儿科"}})],1)],1),i("el-form-item",{attrs:{label:"职务","label-width":e.formLabelWidth,prop:"job"}},[i("el-select",{attrs:{placeholder:"请选择职务"},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}},[i("el-option",{attrs:{label:"主任医师",value:"主任医师"}}),i("el-option",{attrs:{label:"副主任医师",value:"副主任医师"}}),i("el-option",{attrs:{label:"主治医师",value:"主治医师"}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1,e.resetForm("form")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},x=[],w={name:"Login",data:function(){return{user:{username:"1234",password:"1234"},imgs:["../assets/hhh.jpg","../assets/hhh.jpg"],dialogFormVisible:!1,form:{name:"",sex:"",date1:"",date2:"",account:"",pwd:"",pwd_0:"",tel:"",department:"",job:""},rules:{name:[{required:!0,message:"Please input Activity name",trigger:"blur"}],sex:[{required:!0,message:"Please input Activity sex",trigger:"blur"}],account:[{required:!0,message:"Please input Activity account",trigger:"blur"}],pwd:[{required:!0,message:"Please input Activity password",trigger:"blur"}],pwd_0:[{required:!0,message:"Please input Activity password_0",trigger:"blur"}],tel:[{required:!0,message:"Please input Activity tel",trigger:"blur"}],department:[{required:!0,message:"Please input Activity department",trigger:"blur"}],job:[{required:!0,message:"Please input Activity job",trigger:"blur"}]},formLabelWidth:"120px"}},methods:{doLogin:function(){var e=this;this.axios.get("/login?username="+this.user.username+"&pwd="+this.user.password).then((function(t){"200"===t.data.code?(console.log(t.data),sessionStorage.setItem("user_name",t.data.doctor_name),sessionStorage.setItem("sex",t.data.doctor_sex),sessionStorage.setItem("tel",t.data.doctor_tel),sessionStorage.setItem("department",t.data.doctor_department),sessionStorage.setItem("job",t.data.doctor_job),sessionStorage.setItem("doctor_id",t.data.doctor_id),console.log("登陆成功"),e.$router.push("main"),e.$message({type:"success",message:"登陆成功"}),sessionStorage.setItem("token","true")):e.$message({type:"info",message:"账号密码错误."})})).catch((function(t){e.$message({type:"info",message:"网络异常."}),console.log(t)}))},regist:function(){this.dialogFormVisible=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.form.pwd!=t.form.pwd_0?(t.dialogFormVisible=!0,t.$message({type:"info",message:"验证密码不对."}),!1):(t.dialogFormVisible=!0,t.$message({type:"info",message:"有信息未填写."}),!1);console.log("---------------------"),t.$axios.post("/regist/",t.form).then((function(e){200==e.data.code&&t.$message({type:"success",message:"提交成功."})}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},S=w,k=(a("039a"),Object(d["a"])(S,y,x,!1,null,null,null)),$=k.exports,j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-header",{staticStyle:{"margin-top":"0px"}},[i("h1",[e._v(" 腰椎分割诊断系统 ")]),i("el-button",{staticStyle:{"margin-right":"500px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.refresh()}}},[e._v(" 刷新")]),i("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v(" 添加病人")])],1),i("el-container",{staticStyle:{"margin-top":"100px"}},[i("el-aside",{staticStyle:{width:"200px"}},[i("img",{staticClass:"image",staticStyle:{width:"200px",", heigh":"200px"},attrs:{src:a("54d9")}}),i("h2",[e._v("ID："+e._s(e.doctor_id))]),i("h2",[e._v("姓名："+e._s(e.doctor_name))]),i("h2",[e._v("性别："+e._s(e.sex))]),i("h2",[e._v("部门："+e._s(e.department))]),i("h2",[e._v("职位："+e._s(e.job))]),i("h2",[e._v("联系方式："+e._s(e.tel))])]),i("el-main",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table}},[i("el-table-column",{attrs:{fixed:"",prop:"patient_date",label:"日期",width:"150"}}),i("el-table-column",{attrs:{prop:"patient_name",label:"姓名",width:"120"}}),i("el-table-column",{attrs:{prop:"patient_sex",label:"性别",width:"120"}}),i("el-table-column",{attrs:{prop:"patient_age",label:"年龄",width:"120"}}),i("el-table-column",{attrs:{prop:"patient_allergy",label:"过敏史",width:"120"}}),i("el-table-column",{attrs:{prop:"patient_id",label:"编号",width:"120"}}),i("el-table-column",{attrs:{prop:"doctor_name",label:"主任医师",width:"300"}}),i("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.open(t.$index,t.row)}}},[e._v(" 删除")]),i("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.checkPatient(t.$index,t.row)}}},[e._v(" 查看")])]}}])})],1)],1),i("el-dialog",{attrs:{title:"添加病人",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[i("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth,prop:"sex"}},[i("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[i("el-option",{attrs:{label:"男",value:"男"}}),i("el-option",{attrs:{label:"女",value:"女"}})],1)],1),i("el-form-item",{attrs:{label:"年龄","label-width":e.formLabelWidth,prop:"age"}},[i("el-select",{attrs:{placeholder:"请选择年龄"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}},e._l(90,(function(e){return i("el-option",{key:e,attrs:{value:e,disabled:e.disabled}})})),1)],1),i("el-form-item",{attrs:{label:"出生日期","label-width":e.formLabelWidth,prop:"born"}},[i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"}),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.born,callback:function(t){e.$set(e.form,"born",t)},expression:"form.born"}})],1)]),i("el-form-item",{attrs:{label:"民族","label-width":e.formLabelWidth,prop:"nation"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.nation,callback:function(t){e.$set(e.form,"nation",t)},expression:"form.nation"}})],1),i("el-form-item",{attrs:{label:"职业","label-width":e.formLabelWidth,prop:"job"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),i("el-form-item",{attrs:{label:"住址","label-width":e.formLabelWidth,prop:"address"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"过敏史","label-width":e.formLabelWidth,prop:"allergy"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add_patient(t)}}},[i("el-input",{staticStyle:{width:"300px"},attrs:{autocomplete:"off"},model:{value:e.form.allergy,callback:function(t){e.$set(e.form,"allergy",t)},expression:"form.allergy"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1,e.resetForm("form")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1,e.add_patient()}}},[e._v("确 定")])],1)],1)],1)],1)},I=[],C={name:"Main",created:function(){this.refresh()},methods:{handleDelete:function(e,t){var a=this;console.log("patient_id 是",t["patient_id"]),this.axios.get("/delete?patient_id="+t.patient_id).then((function(e){console.log(e),a.refresh()})),console.log(e,t)},checkPatient:function(e,t){sessionStorage.removeItem("patient_id",t.patient_id),sessionStorage.setItem("patient_id",t.patient_id),sessionStorage.setItem("patient_name",t.patient_name),sessionStorage.setItem("patient_sex",t.patient_sex),sessionStorage.setItem("patient_age",t.patient_age),sessionStorage.setItem("patient_date",t.patient_date),sessionStorage.setItem("patient_nation",t.patient_nation),sessionStorage.setItem("patient_address",t.patient_address),sessionStorage.setItem("patient_job",t.patient_job),sessionStorage.setItem("patient_allergy",t.patient_allergy),console.log("bingrenshi :"+sessionStorage.getItem("patient_name")),this.$router.push("patient")},refresh:function(){var e=this;this.axios.get("/refresh?doctor_id="+sessionStorage.getItem("doctor_id")).then((function(t){console.log(t.data),e.table=t.data}))},add_patient:function(){var e=this;this.form["doc_id"]=sessionStorage.getItem("doctor_id"),this.axios.post("/add_patient/",this.form,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){200===t.data.code?(e.form={brand_right:0},console.log(t),e.refresh(),e.$message({type:"success",message:"新建成功"}),resetForm(e.form),e.$refs[e.form].resetFields()):(e.$message({type:"info",message:"创建失败"}),resetForm(e.form),e.$refs[e.form].resetFields())})).catch((function(e){console.log(e)}))},resetForm:function(e){this.$refs[e].resetFields()},open:function(e,t){var a=this;this.$confirm("This will permanently delete the file. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.handleDelete(e,t),a.$message({type:"success",message:"删除成功"})})).catch((function(){a.$message({type:"info",message:"取消删除"})}))}},data:function(){return{table:[],doctor_name:sessionStorage.getItem("user_name"),sex:sessionStorage.getItem("sex"),tel:sessionStorage.getItem("tel"),department:sessionStorage.getItem("department"),job:sessionStorage.getItem("job"),doctor_id:sessionStorage.getItem("doctor_id"),dialogFormVisible:!1,form:{doc_id:"",name:"",sex:"",date1:"",date2:"",age:"",nation:"",address:"",born:"",job:"",allergy:""},rules:{name:[{required:!0,message:"Please input Activity name",trigger:"blur"}],sex:[{required:!0,message:"Please input Activity sex",trigger:"blur"}],nation:[{required:!0,message:"Please input Activity nation",trigger:"blur"}],age:[{required:!0,message:"Please input Activity age",trigger:"blur"}],address:[{required:!0,message:"Please input Activity address",trigger:"blur"}],born:[{required:!0,message:"Please input Activity born",trigger:"blur"}],job:[{required:!0,message:"Please input Activity job",trigger:"blur"}],allergy:[{required:!0,message:"Please input Activity allergy",trigger:"blur"}]},formLabelWidth:"120px"}}},z=C,A=(a("c266"),Object(d["a"])(z,j,I,!1,null,null,null)),T=A.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{"margin-top":"0%"},attrs:{type:"success",icon:"el-icon-refresh-left",circle:""},on:{click:e.refresh}}),a("el-header",[a("h1",[a("p",[e._v(" "+e._s(e.table[0]["patient_name"])+"的病历表")])])]),a("el-container",[a("el-main",[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table}},[a("el-table-column",{attrs:{fixed:"",prop:"patient_date",label:"日期",width:"150"}}),a("el-table-column",{attrs:{prop:"patient_name",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"patient_sex",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"patient_age",label:"年龄",width:"120"}}),a("el-table-column",{attrs:{prop:"patient_allergy",label:"过敏史",width:"120"}}),a("el-table-column",{attrs:{prop:"patient_id",label:"编号",width:"120"}}),a("el-table-column",{attrs:{prop:"doctor_name",label:"主任医师",width:"300"}})],1),a("el-input",{staticStyle:{"font-size":"25px"},attrs:{type:"textarea",readonly:this.readonly,rows:5,placeholder:"诊断结果"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("el-input",{staticStyle:{"font-size":"25px"},attrs:{type:"textarea",rows:5,readonly:this.readonly,placeholder:"治疗建议"},model:{value:e.textarea2,callback:function(t){e.textarea2=t},expression:"textarea2"}}),a("el-button",{on:{click:function(t){return e.submit()}}},[e._v(" 提交病历 ")]),a("el-button",{on:{click:function(t){return e.edit()}}},[e._v(" 编辑病历 ")]),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-remove":e.handleRemove,"auto-upload":!0,"before-upload":e.handleUpload,"on-exceed":e.handleExceed,"on-success":e.uploadSuccess,"show-file-list":!0,multiple:"",accept:".gz",limit:5,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传CT文件")]),a("el-upload-list",{ref:"upload_list"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 添加病人CT文件")])],1),a("el-tag",{attrs:{type:"success"}},[e._v("已经上传图像："+e._s(e.record_slicer_file))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.diagnosis}},[e._v("查看分割图像")])]],2)],1)],1)},F=[],L=(a("99af"),a("b0c0"),{name:"Patient",activated:function(){this.refresh(),console.log("已经刷新123")},methods:{refresh:function(){var e=this;this.axios.get("/record?patient_id="+sessionStorage.getItem("patient_id")).then((function(t){e.table=t.data,e.textarea=e.table[0]["record_condition"],e.textarea2=e.table[0]["record_opinion"],e.record_slicer_file=e.table[0]["record_slicer_file"],console.log(e.record_slicer_file)}))},handleUpload:function(e){var t=this,a=new FormData;a.append("file",e),a.append("patient_id",this.table[0]["patient_id"]),console.log(this.table[0]["patient_id"]),this.axios.post("/postfile/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.data.code?(console.log("上传成功"),t.slicer_file=e.data.data,t.$message({type:"success",message:"上传成功"}),t.refresh()):t.$message({type:"error",message:"上传失败，请重新上传"})})).catch((function(e){t.$message({type:"info",message:"网络异常请重新上传"}),console.log(e)}))},handleRemove:function(e){this.$refs.upload.abort(),this.$message({type:"success",message:"移除文件"+e.name})},handleExceed:function(e,t){this.$message.warning("The limit is 3, you selected ".concat(e.length," files this time, add up to ").concat(e.length+t.length," totally"))},uploadSuccess:function(){this.$message({type:"success",message:"上传成功"})},diagnosis:function(){null==this.record_slicer_file?this.$message({type:"info",message:"请上传CT文件."}):this.$router.push("Diagnosis")},submit:function(){var e=this;this.readonly=!0,null==this.record_slicer_file?this.$message({type:"info",message:"请上传CT文件并诊断."}):(this.record.patient_id=this.table[0]["patient_id"],this.record.record_slicer_file=this.record_slicer_file,this.record.record_condition=this.textarea,this.record.record_opinion=this.textarea2,console.log(this.record),this.axios.post("/opinion/",this.record,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){200===t.data.code&&e.$message({type:"success",message:"提交成功"})})))},edit:function(){this.readonly=!1}},data:function(){return{table:[],textarea:"",textarea2:"",fileList:[],filenum:0,slicer_file:"",record:{patient_id:"",record_slicer_file:"",record_condition:"",record_opinion:""},record_slicer_file:"",readonly:!0}}}),O=L,P=(a("5079"),Object(d["a"])(O,D,F,!1,null,"0bdd4bc4",null)),q=P.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-header",[a("h1",[e._v(" 查看病人CT及处理过的模型 ")])]),a("el-container",[a("el-main",[a("h2",[e._v(" 读取图像 ")]),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_x,"show-input":""},model:{value:e.label_0,callback:function(t){e.label_0=t},expression:"label_0"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_y,"show-input":""},model:{value:e.label_1,callback:function(t){e.label_1=t},expression:"label_1"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_z,"show-input":""},model:{value:e.label_2,callback:function(t){e.label_2=t},expression:"label_2"}})],1)])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/temporary/"+this.temporary_file+"x/"+this.label_0+".png"}}),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-right":"50%"},attrs:{type:"primary"},on:{click:e.readImg}},[e._v(" 读取图片 ")])],1),a("el-col",{attrs:{span:8}},[[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]],2),a("el-col",{attrs:{span:8}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-remove":e.handleRemove,"auto-upload":!0,"before-upload":e.handleUpload,"on-success":e.uploadSuccess,multiple:"",accept:this.value,limit:5}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传CT文件")]),a("el-upload-list",{ref:"upload_list"})],1)],1)],1)]),a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/temporary/"+this.temporary_file+"y/"+this.label_1+".png"}})],1),a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/temporary/"+this.temporary_file+"z/"+this.label_2+".png"}})],1)],1),a("el-row",[a("h2",[e._v(" 分割之后图像 ")]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_0x,"show-input":""},model:{value:e.label_3,callback:function(t){e.label_3=t},expression:"label_3"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_0y,"show-input":""},model:{value:e.label_4,callback:function(t){e.label_4=t},expression:"label_4"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-slider",{staticStyle:{width:"400px"},attrs:{max:this.imgnum_0z,"show-input":""},model:{value:e.label_5,callback:function(t){e.label_5=t},expression:"label_5"}})],1)])],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/"+this.patient_id+"/sliced_filex/"+this.label_3+".png"}}),a("el-button",{staticStyle:{"margin-right":"50%"},attrs:{type:"primary"},on:{click:function(t){return e.Segmentation()}}},[e._v(" 分割图像 ")])],1)]),a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/"+this.patient_id+"/sliced_filey/"+this.label_4+".png"}}),a("el-button",{staticStyle:{"margin-right":"50%"},attrs:{type:"primary"},on:{click:function(t){return e.readSplitedImg()}}},[e._v(" 读取分割图片 ")])],1),a("el-col",{attrs:{span:8}},[a("el-image",{staticStyle:{width:"400px",height:"400px","margin-right":"50%"},attrs:{src:"http://211.87.234.165:8888/original_files/"+this.patient_id+"/sliced_filez/"+this.label_5+".png"}}),a("el-button",{staticStyle:{"margin-right":"50%"},attrs:{type:"primary"},on:{click:function(t){return e.edit()}}},[e._v(" 套索编辑 ")])],1)],1)],1),a("el-footer",[a("el-button",{attrs:{type:"success",size:"large"},on:{click:function(t){return e.models()}}},[e._v(" 查看模型 ")])],1)],1)],1)},V=[],E={name:"Diagnosis",data:function(){return{patient_id:sessionStorage.getItem("patient_id"),label_0:0,label_1:0,label_2:0,label_3:0,label_4:0,label_5:0,imgnum:0,imgnum_x:0,imgnum_y:0,imgnum_z:0,imgnum_0x:0,imgnum_0y:0,imgnum_0z:0,options:[{value:".nii",label:"nii文件"},{value:".nrrd",label:"nrrd文件"},{value:".zip",label:"dicom文件"},{value:".gz",label:"gz文件"}],value:"",temporary_file:"0"}},activated:function(){readSplitedImg()},methods:{readImg:function(){var e=this;this.$axios.post("/read_img/",{patient_id:sessionStorage.getItem("patient_id"),code:111,file_name:this.temporary_file},{headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"image/png"}).then((function(t){console.log(e.temporary_file),console.log(t),e.imgnum_x=t.data["x"]-1,e.imgnum_y=t.data["y"]-1,e.imgnum_z=t.data["z"]-1}))},Segmentation:function(){var e=this;console.log(sessionStorage.getItem("patient_id")+"sss"),this.$axios.post("/segmentation/",{patient_id:sessionStorage.getItem("patient_id")}).then((function(t){console.log(sessionStorage.getItem("patient_id")),console.log(t),200==t.data.code?e.$message({type:"success",message:"分割成功"}):500==t.data.code&&e.$message({type:"info",message:"分割失败，请重新上传"})}))},readSplitedImg:function(){var e=this;this.$axios.post("/read_img/",{patient_id:sessionStorage.getItem("patient_id"),code:222,file_name:""},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){console.log(sessionStorage.getItem("patient_id")),console.log(t),e.imgnum_0x=t.data["x"]-1,e.imgnum_0y=t.data["y"]-1,e.imgnum_0z=t.data["z"]-1}))},edit:function(){window.open("http://211.87.234.165:8888/taosuo/?patient_id="+sessionStorage.getItem("patient_id")+"&number="+this.label_5)},handleUpload:function(e){var t=this,a=new FormData;a.append("file",e),a.append("patient_id",sessionStorage.getItem("patient_id")),console.log(sessionStorage.getItem("patient_id")),this.axios.post("/temporaryfile/",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.data.code?(console.log("上传成功"),t.temporary_file=e.data.data,t.$message({type:"success",message:"上传成功"})):t.$message({type:"error",message:"上传失败，请重新上传"})})).catch((function(e){t.$message({type:"info",message:"网络异常请重新上传"}),console.log(e)}))},handleRemove:function(e){this.$refs.upload.abort(),this.$message({type:"success",message:"移除文件"+e.name})},uploadSuccess:function(){this.$message({type:"success",message:"上传成功"})},models:function(){console.log("sss0+"+sessionStorage.getItem("patient_id")),window.open("http://211.87.234.165:8888/models/?patient_id="+sessionStorage.getItem("patient_id"))}}},U=E,R=(a("ce6b"),Object(d["a"])(U,W,V,!1,null,"106f74bf",null)),K=R.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{on:{click:e.c1}},[e._v("查看原始图像")]),a("el-button",{on:{click:e.c2}},[e._v("查看预测结果")]),a("el-button",{on:{click:e.test}}),a("el-dialog",{attrs:{title:"选择图像处理方式",visible:e.digvis},on:{"update:visible":function(t){e.digvis=t}}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectch},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.digclick}},[e._v("确定")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName},on:{"row-click":e.handleclick}},[a("el-table-column",{attrs:{label:"",width:"500"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img}})]}}])}),a("el-table-column",{attrs:{label:"",width:"500"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img1}})]}}])})],1)],1)},J=[],N=(a("c975"),{name:"ImageShow",props:["msg"],data:function(){return{ln:"",tableData:[],options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}],value4:"1",digvis:!1,isse:1,selrow:0}},created:function(){},methods:{c1:function(){var e=this;console.log(this.msg),this.$axios.get("ajax/data/?id="+this.msg).then((function(t){console.log("yes");for(var a=0,i=[],l=t.data.imgs.length;a<l;++a){var s=new Array;s["img"]="http://211.87.234.165:9988/"+t.data.imgs[a],i.push(s)}e.tableData=i,console.log("length"+e.tableData.length),e.ln=t.data.label_names,console.log(e.ln)}))},test:function(){console.log("test"),this.tableData.push({img:"http://211.87.234.165:9988/media/1592190984.5149817.png"}),this.tableData.push({img:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1592189663&di=74710b06b56db95d71bb0e9a4e0d7f5e&src=http://ztd00.photos.bdimg.com/ztd/w=700;q=50/sign=0dc763f872cb0a46852289395b588719/c8177f3e6709c93d71fb8ff5963df8dcd10054a2.jpg"})},c2:function(){var e=this;console.log("NO"),this.$axios.get("ajax/label/?file_id="+this.msg+"&label_name="+this.ln).then((function(t){console.log("yes");for(var a=0,i=e.tableData.length,l=[];a<i;++a){var s=new Array;s["img"]=e.tableData[a].img,s["img1"]="http://211.87.234.165:9988/"+t.data.imgs[a],l.push(s)}e.tableData=l}))},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},digclick:function(){var e=this.tableData[this.selrow].img;this.digvis=!1,console.log(e);var t=e.substring(e.indexOf("/",e.indexOf("/",e.indexOf("/")+1)+1)+1),a="ajax/pro/?name="+t+"&type="+this.isse,i=this;this.$axios.get(a).then((function(e){console.log(e.data.new_name);var t="http://211.87.234.165:9988/"+e.data.new_name;i.$set(i.tableData,i.selrow,{img:t}),console.log(t)})),this.tableData.push({img:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1592189663&di=74710b06b56db95d71bb0e9a4e0d7f5e&src=http://ztd00.photos.bdimg.com/ztd/w=700;q=50/sign=0dc763f872cb0a46852289395b588719/c8177f3e6709c93d71fb8ff5963df8dcd10054a2.jpg"}),console.log(this.tableData.length),this.tableData.push({img:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1592189663&di=74710b06b56db95d71bb0e9a4e0d7f5e&src=http://ztd00.photos.bdimg.com/ztd/w=700;q=50/sign=0dc763f872cb0a46852289395b588719/c8177f3e6709c93d71fb8ff5963df8dcd10054a2.jpg"}),console.log(this.tableData.length),console.log("####################################")}}}),G=N,B=Object(d["a"])(G,M,J,!1,null,null,null),X=B.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{on:{click:e.linkDownload}},[e._v("百度")])],1)},H=[],Q={name:"STL",methods:{linkDownload:function(){console.log("xinchuangkou"),window.open("http://localhost:8000/models/")}},data:function(){}},Z=Q,ee=Object(d["a"])(Z,Y,H,!1,null,"7a8dc4ca",null),te=ee.exports;i["default"].use(v["a"]);var ae=new v["a"]({routes:[{path:"/",name:"login",component:$},{path:"/Main",name:"main",component:T},{path:"/Patient",name:"patient",component:q,meta:{requireAuth:!0,keepAlive:!0}},{path:"/Diagnosis",name:"diagnosis",component:K,meta:{requireAuth:!0,keepAlive:!0}},{path:"/ImageShow",name:"ImageShow",component:X},{path:"/STL",name:"STL",component:te}]}),ie=ae,le=a("76a0"),se=a.n(le);a("aa35");i["default"].use(n.a),i["default"].use(se.a),i["default"].use(_.a,h.a),i["default"].use(f.a),i["default"].prototype.$axios=h.a,i["default"].config.productionTip=!1,new i["default"]({router:ie,render:function(e){return e(m)}}).$mount("#app"),h.a.defaults.baseURL="http://211.87.234.165:8888",h.a.defaults.timeout=1e6},"5d72":function(e,t,a){},7174:function(e,t,a){},"85ec":function(e,t,a){},c266:function(e,t,a){"use strict";var i=a("3a7d"),l=a.n(i);l.a},ce6b:function(e,t,a){"use strict";var i=a("5d72"),l=a.n(i);l.a}});