{"remainingRequest":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\大三下\\项目实训\\vue_test001\\src\\components\\Patient.vue?vue&type=style&index=0&id=959bdaf6&scoped=true&lang=css&","dependencies":[{"path":"F:\\大三下\\项目实训\\vue_test001\\src\\components\\Patient.vue","mtime":1592621516862},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC1oZWFkZXJ7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWQwOWVjOwogICAgY29sb3I6ICMzMzM7CiAgICB3aWR0aDogNjAlOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbGluZS1oZWlnaHQ6IDUwcHg7CiAgICBtYXJnaW4tcmlnaHQ6IDIwJTsKICAgIG1hcmdpbi1sZWZ0OiAyMCU7Cn0KLmVsLW1haW4gewogICAgYmFja2dyb3VuZC1jb2xvcjogI0U5RUVGMzsKICAgIGNvbG9yOiAjMzMzMzMzOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbGluZS1oZWlnaHQ6IDEwMHB4OwogICAgbWFyZ2luLXJpZ2h0OiAyMCU7CiAgICBtYXJnaW4tbGVmdDogMjAlOwp9Ci5lbC1hc2lkZSB7CiAgICBmb250LXNpemU6IDMwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTlFRUYzOwogICAgY29sb3I6ICMzMzMzMzM7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBsaW5lLWhlaWdodDogMTAwcHg7CiAgICBtYXJnaW4tbGVmdDogMjAlOwp9Cg=="},{"version":3,"sources":["Patient.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Patient.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <el-button style=\"margin-top: 0%\" type=\"success\" icon=\"el-icon-check\" circle></el-button>\r\n        <el-header>\r\n\r\n            <h1>\r\n                <p > {{patient_name}}的病历表</p>\r\n            </h1>\r\n\r\n        </el-header>\r\n        <el-container>\r\n            <el-main>\r\n                <template>\r\n                    <el-table\r\n                            :data=\"table\"\r\n                            style=\"width: 100%\">\r\n                        <el-table-column\r\n                                fixed\r\n                                prop=\"patient_date\"\r\n                                label=\"日期\"\r\n                                width=\"150\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"patient_name\"\r\n                                label=\"姓名\"\r\n                                width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"patient_sex\"\r\n                                label=\"性别\"\r\n                                width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"patient_age\"\r\n                                label=\"年龄\"\r\n                                width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"patient_allergy\"\r\n                                label=\"过敏史\"\r\n                                width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"patient_id\"\r\n                                label=\"编号\"\r\n                                width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                                prop=\"doctor_name\"\r\n                                label=\"主任医师\"\r\n                                width=\"300\">\r\n                        </el-table-column>\r\n                    </el-table>\r\n                    <el-input\r\n                            type=\"textarea\"\r\n                            :readonly=\"this.readonly\"\r\n                            :rows=\"5\"\r\n                            placeholder=\"诊断结果\"\r\n                            style=\"font-size: 25px\"\r\n                            v-model=\"textarea\">\r\n                    </el-input>\r\n                    <el-input\r\n                            type=\"textarea\"\r\n                            :rows=\"5\"\r\n                            :readonly=\"this.readonly\"\r\n                            style=\"font-size: 25px\"\r\n                            placeholder=\"治疗建议\"\r\n                            v-model=\"textarea2\">\r\n                    </el-input>\r\n                    <el-button @click=\"submit()\">\r\n                        提交病历\r\n                    </el-button>\r\n                    <el-button @click=\"edit()\">\r\n                        编辑病历\r\n                    </el-button>\r\n                    <el-upload\r\n                            class=\"upload-demo\"\r\n                            action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                            ref=\"upload\"\r\n                            :on-remove=\"handleRemove\"\r\n                            :auto-upload=\"true\"\r\n                            :before-upload=\"handleUpload\"\r\n                            :on-exceed=\"handleExceed\"\r\n                            :on-success=\"uploadSuccess\"\r\n                            :on-error=\"uploadError\"\r\n                            :show-file-list = \"true\"\r\n                            multiple\r\n                            accept = \"\"\r\n                            :limit=\"5\"\r\n                            :file-list=\"fileList\">\r\n                        <el-button size=\"small\" type=\"primary\" >上传CT文件</el-button>\r\n                        <el-upload-list ref=\"upload_list\">\r\n                        </el-upload-list>\r\n                        <div slot=\"tip\" class=\"el-upload__tip\"> 添加病人CT文件</div>\r\n                    </el-upload>\r\n                    <el-tag type=\"success\">已经上传图像：{{record_slicer_file}}</el-tag>\r\n\r\n                    <el-button size=\"small\" type=\"primary\"  @click=\"diagnosis\">查看分割图像</el-button>\r\n\r\n                </template>\r\n            </el-main>\r\n<!--            <img src=\"../assets/head.png\"  style = \"width:200px;, heigh:200px ;margin-left: 20%\"  class =\"image\" />-->\r\n        </el-container>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n    export default {\r\n        name: \"Patient\",\r\n\r\n\r\n        activated(){\r\n            this.refresh()\r\n            console.log(\"已经刷新123\")\r\n        },\r\n        created(){\r\n            this.refresh()\r\n            console.log(\"已经刷新456\")\r\n        },\r\n        methods:{\r\n            //刷新界面\r\n            refresh(){\r\n                this.axios.get(\"/record?patient_id=\" + sessionStorage.getItem(\"patient_id\") )\r\n                    .then(res =>{\r\n                        this.table = res.data\r\n                        this.textarea = this.table[0]['record_condition']\r\n                        this.textarea2 = this.table[0]['record_opinion']\r\n                        this.record_slicer_file= this.table[0]['record_slicer_file']\r\n\r\n                        console.log( this.fileList)\r\n                    })\r\n            },\r\n            //上传文件\r\n            handleUpload(file){\r\n                let fd_file = new FormData()\r\n                fd_file.append('file',file)\r\n                fd_file.append(\"patient_id\", this.table[0]['patient_id'])\r\n                console.log(this.table[0]['patient_id'])\r\n                this.axios.post(\"/postfile/\",fd_file,{\r\n                    headers:{\r\n                        'Content-Type': 'multipart/form-data'\r\n                    },\r\n\r\n\r\n                }).then(res=>{\r\n                    if(res.data.code === 200 ){\r\n                        console.log(\"上传成功\")\r\n                        this.slicer_file = res.data.data\r\n\r\n                        this.filenum += 1\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '上传成功'\r\n                        });\r\n                        this.refresh()\r\n                    }else{\r\n                        this.$message({\r\n                            type: 'error',\r\n                            message: '上传失败，请重新上传'\r\n                        });\r\n                    }\r\n                }).catch(error => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '网络异常请重新上传'\r\n                    });\r\n                    // eslint-disable-next-line no-console\r\n                    console.log(error);\r\n                })\r\n\r\n            },\r\n            //取消上传\r\n            handleRemove(file) {\r\n                this.$refs.upload.abort();\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '移除文件' +\r\n                        file.name\r\n                });\r\n\r\n            },\r\n            handleExceed(files, fileList) {\r\n                this.$message.warning(`The limit is 3, you selected ${files.length} files this time, add up to ${files.length + fileList.length} totally`);\r\n            },\r\n            uploadSuccess(){\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '上传成功'\r\n                });\r\n            },\r\n\r\n            \r\n            diagnosis(){\r\n                if(this.record_slicer_file == ''){\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '请上传CT文件.'\r\n                    });\r\n\r\n                }else{\r\n                    this.$router.push('diagnosis')\r\n                }\r\n            },\r\n            submit() {\r\n                this.readonly = true\r\n                if (this.record_slicer_file == '') {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '请上传CT文件并诊断.'\r\n                    });\r\n\r\n                } else {\r\n                    this.record.patient_id = this.table[0]['patient_id']\r\n                    this.record.record_slicer_file = this.record_slicer_file\r\n                    this.record.record_condition = this.textarea\r\n                    this.record.record_opinion = this.textarea2\r\n                    console.log(this.record)\r\n                    this.axios.post('/opinion/', this.record, {\r\n                        headers: {\r\n                            'Content-Type': 'application/x-www-form-urlencoded'\r\n                        },\r\n\r\n                    }).then(res => {\r\n                        if (res.data.code === 200) {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: '提交成功'\r\n                            });\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            edit(){\r\n                this.readonly = false\r\n            }\r\n\r\n\r\n\r\n        },\r\n        data(){\r\n            return {\r\n                table: [],\r\n                patient_name: sessionStorage.getItem(\"patient_name\"),\r\n                textarea: '',\r\n                textarea2: '',\r\n                fileList: [],\r\n                filenum: 0,\r\n                slicer_file: '',\r\n                record: {\r\n                    patient_id:'',\r\n                    record_slicer_file:'',\r\n                    record_condition:'',\r\n                    record_opinion:''\r\n            },\r\n                record_slicer_file:'',\r\n                readonly:true\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .el-header{\r\n        background-color: #9d09ec;\r\n        color: #333;\r\n        width: 60%;\r\n        text-align: center;\r\n        line-height: 50px;\r\n        margin-right: 20%;\r\n        margin-left: 20%;\r\n    }\r\n    .el-main {\r\n        background-color: #E9EEF3;\r\n        color: #333333;\r\n        text-align: center;\r\n        line-height: 100px;\r\n        margin-right: 20%;\r\n        margin-left: 20%;\r\n    }\r\n    .el-aside {\r\n        font-size: 30px;\r\n        background-color: #E9EEF3;\r\n        color: #333333;\r\n        text-align: center;\r\n        line-height: 100px;\r\n        margin-left: 20%;\r\n    }\r\n</style>"]}]}