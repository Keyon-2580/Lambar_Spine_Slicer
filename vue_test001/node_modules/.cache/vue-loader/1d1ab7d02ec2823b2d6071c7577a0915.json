{"remainingRequest":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\大三下\\项目实训\\vue_test001\\src\\components\\Main.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"F:\\大三下\\项目实训\\vue_test001\\src\\components\\Main.vue","mtime":1592389820795},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\大三下\\项目实训\\vue_test001\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWhlYWRlciwgLmVsLWZvb3RlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOWQwOWVjOwogICAgY29sb3I6ICMzMzM7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBsaW5lLWhlaWdodDogNTBweDsKfQoKLmVsLWFzaWRlIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNEM0RDRTY7CiAgICBjb2xvcjogIzMzMzsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogICAgZm9udC1zaXplOiAxMnB4OwogICAgdGV4dC1hbGlnbjogbGVmdDsKfQoKLmVsLW1haW4gewogICAgYmFja2dyb3VuZC1jb2xvcjogI0U5RUVGMzsKICAgIGNvbG9yOiAjMzMzOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgbGluZS1oZWlnaHQ6IDEwMHB4Owp9Cg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6RA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/components","sourcesContent":["<script src=\"../main.js\"></script>\r\n<template>\r\n    <div>\r\n        <el-header style=\"margin-top: 0px; \">\r\n<!--            <img src=\"../assets/hhh.jpg\"  style = \"width:200px;, heigh:200px\"  class =\"image\" />-->\r\n            <h1>\r\n                系统\r\n            </h1>\r\n            <el-button\r\n                    @click = \"refresh()\"\r\n                    type=\"danger\"\r\n                    size = \"small\"\r\n                    style=\"margin-right: 500px\">\r\n                刷新</el-button>\r\n            <el-button\r\n                    @click=\"dialogFormVisible = true; \"\r\n                    type=\"primary\"\r\n                    size = \"small\"\r\n                    round>\r\n                添加病人</el-button>\r\n        </el-header>\r\n        <el-container style=\"margin-top: 100px\">\r\n        <el-aside style=\" width:200px\">\r\n            <img src=\"../assets/head.png\"  style = \"width:200px;, heigh:200px\"  class =\"image\" />\r\n            <h2>ID：{{doctor_id}}</h2>\r\n            <h2>姓名：{{doctor_name}}</h2>\r\n            <h2>性别：{{sex}}</h2>\r\n            <h2>部门：{{department}}</h2>\r\n            <h2>职位：{{job}}</h2>\r\n            <h2>联系方式：{{tel}}</h2>\r\n        </el-aside>\r\n        <el-main>\r\n            <el-table\r\n                    :data=\"table\"\r\n                    style=\"width: 100%\">\r\n                <el-table-column\r\n                        fixed\r\n                        prop=\"patient_date\"\r\n                        label=\"日期\"\r\n                        width=\"150\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"patient_name\"\r\n                        label=\"姓名\"\r\n                        width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"patient_sex\"\r\n                        label=\"性别\"\r\n                        width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"patient_age\"\r\n                        label=\"年龄\"\r\n                        width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"patient_allergy\"\r\n                        label=\"过敏史\"\r\n                        width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"patient_id\"\r\n                        label=\"编号\"\r\n                        width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"doctor_name\"\r\n                        label=\"主任医师\"\r\n                        width=\"300\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        label=\"操作\"\r\n                        width=\"300\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                                @click = \"open(scope.$index, scope.row)\"\r\n                                type=\"danger\"\r\n                                size = \"small\">\r\n                            删除</el-button>\r\n                        <el-button\r\n                                type=\"warning\"\r\n                                size =\"small\"\r\n                                @click=\"checkPatient(scope.$index, scope.row)\">\r\n                            查看</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-main>\r\n            <el-dialog title=\"添加病人\" :visible.sync=\"dialogFormVisible\" >\r\n                <el-form :model=\"form\" :rules=\"rules\" >\r\n                    <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\" prop=\"name\">\r\n                        <el-input v-model=\"form.name\" style=\"width: 220px\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"性别\" :label-width=\"formLabelWidth\" prop=\"sex\">\r\n                        <el-select v-model=\"form.sex\" placeholder=\"请选择性别\">\r\n                            <el-option label=\"男\" value=\"男\"></el-option>\r\n                            <el-option label=\"女\" value=\"女\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"年龄\" :label-width=\"formLabelWidth\" prop=\"age\">\r\n                        <el-select v-model=\"form.age\" placeholder=\"请选择年龄\">\r\n                            <el-option\r\n                                    v-for=\"item in 90\"\r\n                                    :key = \"item\"\r\n                                    :value=\"item\"\r\n                                    :disabled=\"item.disabled\">\r\n                            </el-option>\r\n                        </el-select>\r\n                        </el-form-item>\r\n                    <el-form-item label=\"出生日期\" :label-width=\"formLabelWidth\" prop=\"born\">\r\n                        <div class=\"block\">\r\n                            <span class=\"demonstration\"></span>\r\n                            <el-date-picker\r\n                                    v-model=form.born\r\n                                    type=\"date\"\r\n                                    placeholder=\"选择日期\">\r\n                            </el-date-picker>\r\n                        </div>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"民族\" :label-width=\"formLabelWidth\" prop=\"nation\">\r\n                        <el-input v-model=\"form.nation\" style=\"width: 220px\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"职业\" :label-width=\"formLabelWidth\" prop=\"job\">\r\n                        <el-input v-model=\"form.job\"  style=\"width: 220px\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"住址\" :label-width=\"formLabelWidth\" prop=\"address\">\r\n                        <el-input v-model=\"form.address\" style=\"width: 220px\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"过敏史\" :label-width=\"formLabelWidth\" @keydown.enter.native=\"add_patient\" prop=\"allergy\">\r\n                        <el-input v-model=\"form.allergy\" style=\"width: 500px\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n<!--                    <el-form-item label=\"医生ID\" :label-width=\"formLabelWidth\">-->\r\n<!--                        <el-input v-model=\"form.doc_id\" style=\"width: 220px\"  autocomplete=\"off\" ></el-input>-->\r\n<!--                    </el-form-item>-->\r\n                </el-form>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"dialogFormVisible = false; cancel()\" >取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"dialogFormVisible = false; add_patient()\">确 定</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name:\"Main\",\r\n        created(){\r\n            this.refresh()\r\n        },\r\n        methods: {\r\n            handleDelete(index,row){\r\n                console.log('patient_id 是', row['patient_id'])\r\n                this.axios.get(\"http://127.0.0.1:8000/delete?patient_id=\" + row.patient_id)\r\n                    .then(res =>{\r\n                        console.log(res)\r\n                        this.refresh()\r\n                    })\r\n                console.log(index,row)\r\n            },\r\n            checkPatient(index, row){\r\n                sessionStorage.removeItem('patient_id', row.patient_id)\r\n                sessionStorage.setItem('patient_id', row.patient_id);\r\n                sessionStorage.setItem('patient_name', row.patient_name);\r\n                sessionStorage.setItem('patient_sex', row.patient_sex);\r\n                sessionStorage.setItem('patient_age', row.patient_age);\r\n                sessionStorage.setItem('patient_date', row.patient_date);\r\n                sessionStorage.setItem('patient_nation', row.patient_nation);\r\n                sessionStorage.setItem('patient_address', row.patient_address);\r\n                sessionStorage.setItem('patient_job', row.patient_job);\r\n                sessionStorage.setItem('patient_allergy', row.patient_allergy);\r\n                console.log(\"bingrenshi :\" + sessionStorage.getItem('patient_name'))\r\n                this.$router.push('patient')\r\n            },\r\n            refresh(){\r\n                this.axios.get(\"http://127.0.0.1:8000/refresh?doctor_id=\" + sessionStorage.getItem(\"doctor_id\") )\r\n                    .then(res =>{\r\n                        console.log(res.data),\r\n                        this.table = res.data\r\n                    })\r\n            },\r\n            add_patient(){\r\n                this.form['doc_id'] = sessionStorage.getItem('doctor_id')\r\n                this.axios.post(\"http://127.0.0.1:8000/add_patient/\" ,this.form,{\r\n                    headers: {\r\n                        'Content-Type': 'application/x-www-form-urlencoded'\r\n                    },\r\n\r\n                }).then(res=> {\r\n                    if(res.data.code === 200){\r\n                        this.form={brand_right:0}\r\n                        console.log(res);\r\n                        this.refresh();\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: '新建成功'\r\n                        });\r\n                        resetForm(this.form)\r\n                        {\r\n                            this.$refs[this.form].resetFields();\r\n                        }\r\n                    }else{\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: '创建失败'\r\n                        });\r\n                        resetForm(this.form)\r\n                        {\r\n                            this.$refs[this.form].resetFields();\r\n                        }\r\n                    }\r\n\r\n                }).catch(function (error) {\r\n                        console.log(error);\r\n                    });\r\n            },\r\n            cancel(){\r\n                this.form={brand_right:0}\r\n                resetForm(this.form)\r\n                {\r\n                    this.$refs[this.form].resetFields();\r\n                }\r\n            },\r\n            open(index,row) {\r\n                this.$confirm('This will permanently delete the file. Continue?', 'Warning', {\r\n                    confirmButtonText: 'OK',\r\n                    cancelButtonText: 'Cancel',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.handleDelete(index,row)\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '删除成功'\r\n\r\n                    });\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '取消删除'\r\n                    });\r\n                });\r\n            }\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                mainurl: \"http://127.0.0.1:8000/main/\" ,\r\n                table:[],\r\n                doctor_name:sessionStorage.getItem(\"user_name\"),\r\n                sex:sessionStorage.getItem('sex'),\r\n                tel:sessionStorage.getItem('tel'),\r\n                department:sessionStorage.getItem('department'),\r\n                job:sessionStorage.getItem('job'),\r\n                doctor_id:sessionStorage.getItem('doctor_id'),\r\n                dialogFormVisible:false,\r\n                form: {\r\n                    doc_id: '',\r\n                    name: '',\r\n                    sex: '',\r\n                    date1: '',\r\n                    date2: '',\r\n                    age: '',\r\n                    nation: '',\r\n                    address: '',\r\n                    born: '',\r\n                    job: '',\r\n                    allergy: '',\r\n                },\r\n                rules: {\r\n                    name: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    sex: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    nation: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    age: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    address: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    born: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    job: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                    allergy: [{ required: true, message: 'Please input Activity name', trigger: 'blur' }],\r\n                },\r\n                formLabelWidth: '120px'\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    .el-header, .el-footer {\r\n        background-color: #9d09ec;\r\n        color: #333;\r\n        text-align: center;\r\n        line-height: 50px;\r\n    }\r\n\r\n    .el-aside {\r\n        background-color: #D3DCE6;\r\n        color: #333;\r\n        text-align: center;\r\n        line-height: 20px;\r\n        font-size: 12px;\r\n        text-align: left;\r\n    }\r\n\r\n    .el-main {\r\n        background-color: #E9EEF3;\r\n        color: #333;\r\n        text-align: center;\r\n        line-height: 100px;\r\n    }\r\n</style>"]}]}